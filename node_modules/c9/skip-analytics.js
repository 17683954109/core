if (define === undefined) {
    var define = function(fn) {
        fn(require, exports, module);
    };
}

define(function(require, exports, module) {
    "use strict";

    var hasInternalDomain = require("c9/has-internal-domain");
    var hasInternalTestName = require("c9/has-internal-test-name");

    function skipAnalytics(userId, user, allowUnauthorized) {
        if (!allowUnauthorized && userId === -1) return true;
        
        if (!userId || !user) return true;

        if (hasInternalTestName(user)) return true;
        if (hasInternalDomain(user.email)) return true;
        return false;
    }

    module.exports = skipAnalytics;
});